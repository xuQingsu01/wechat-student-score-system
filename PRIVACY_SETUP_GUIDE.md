# 隐私协议配置指南（买家操作手册）

## ✅ 好消息：隐私协议页面已预留！

本小程序已经为您预留好了隐私协议相关配置：
- ✅ 隐私协议页面已创建（`pages/privacy-policy/index`）
- ✅ app.json 中已配置好 privacy 字段
- ✅ 微信系统会自动处理弹窗、同意、跳转逻辑

**您只需要修改联系方式即可！**

---

## 📋 配置前准备

购买本小程序后，您需要完成隐私协议配置才能提交微信审核。

**预计耗时：15分钟**（已大幅简化）

---

## 第一步：修改隐私协议页面联系方式（5分钟）

### 1. 修改页面中的联系方式

打开 `miniprogram/pages/privacy-policy/index.wxml` 文件

搜索并替换以下内容：

| 搜索内容 | 替换为 | 示例 |
|---------|--------|------|
| `[请填写您的邮箱]` | 您的客服邮箱 | support@yourschool.com |
| `[请填写您的电话]` | 您的客服电话 | 400-123-4567 |

### 2. （可选）也可以修改文档中的内容

如果您想保留文档版本，也可以修改 `PRIVACY_POLICY.md` 文件：

| 搜索内容 | 替换为 | 示例 |
|---------|--------|------|
| `[请填写您的邮箱地址]` | 您的客服邮箱 | support@yourschool.com |
| `[请填写您的客服电话]` | 您的客服电话 | 400-123-4567 |
| `[请填写您的公司/组织名称]` | 您的公司/学校名称 | XX学校/XX教育科技有限公司 |
| `[请填写]`（统一社会信用代码） | 18位信用代码 | 91110000XXXXXXXXXX |
| `[请填写]`（注册地址） | 公司注册地址 | 北京市海淀区XX路XX号 |

3. 保存文件

---

## 第二步：配置微信小程序后台（5分钟）

### 1. 登录小程序管理后台
- 访问：https://mp.weixin.qq.com
- 使用管理员微信扫码登录

### 2. 进入隐私设置
```
左侧菜单：设置 → 基本设置 → 服务内容声明 → 用户隐私保护指引
```

### 3. 填写隐私保护指引

**重要提示：** 本小程序已在代码中配置好隐私协议页面，微信会自动展示。

但后台仍需填写（这是微信平台要求）：
- 点击「填写指引内容」按钮
- 将 `PRIVACY_POLICY.md` 全部内容复制粘贴进去
- 或者简单填写："详见小程序内隐私政策页面"
- 点击「保存」

### 4. 配置隐私接口（重要！）

在同一页面下方，勾选小程序使用的隐私接口：

**必选项：**
- ☑️ **选择图片/视频**（wx.chooseMedia）
  - 用途说明：用户上传头像
  
- ☑️ **读写本地存储**（wx.setStorageSync / wx.getStorageSync）
  - 用途说明：缓存用户登录状态和配置信息

**可选项（根据实际使用情况）：**
- ☑️ 保存图片到相册（如果使用了 wx.saveImageToPhotosAlbum）
  - 用途说明：保存成绩报告图片
  
- ☑️ 获取用户信息（如果使用了 wx.getUserProfile）
  - 用途说明：获取微信昵称和头像

### 5. 提交审核
- 点击页面底部的「提交审核」按钮
- 通常1-2小时内审核通过

---

## 第三步：测试隐私功能（5分钟）

### 配置完成后测试：

1. **在微信开发者工具中清除所有缓存**
   ```
   工具 → 清除缓存 → 清除所有
   ```

2. **使用新的测试账号**（从未使用过该小程序的微信号）

3. **首次打开小程序时，微信系统会自动弹出隐私协议同意框：**
   ```
   「学生成绩统计」请求您同意《用户隐私保护指引》
   [不同意]  [同意并继续]
   ```
   **注意：这个弹窗是微信系统自动生成的，不需要你写代码！**

4. **点击弹窗中的「用户隐私保护指引」链接**
   - 会自动跳转到 `pages/privacy-policy/index` 页面
   - 检查内容是否显示正确
   - 检查联系方式是否已修改

5. **点击「同意并继续」后**
   - 小程序应正常进入首页
   - 可以正常使用各项功能

### 如果没有弹出隐私协议：
- ✅ 检查 app.json 中是否有 `"__usePrivacyCheck__": true`
- ✅ 检查 app.json 中是否有 `privacy` 配置
- ✅ 检查后台是否已勾选隐私接口
- ✅ 尝试重新编译小程序
- ✅ 确保使用的是新用户（老用户已同意过）

---

## 常见问题

### Q1: 隐私协议必须配置吗？
**A:** 是的！从2022年9月起，所有小程序提交审核时都必须配置隐私保护指引，否则会被拒绝。

### Q2: 隐私协议可以修改吗？
**A:** 可以随时修改，但重大变更需要重新提交审核，并在小程序内通知用户。

### Q3: 用户拒绝隐私协议会怎样？
**A:** 微信会自动关闭小程序，用户无法使用。

### Q4: 我添加了新功能，需要更新隐私协议吗？
**A:** 如果新功能涉及收集新的个人信息，必须更新隐私协议并通知用户。

### Q5: 隐私协议审核多久？
**A:** 通常1-2小时，最长不超过24小时。

---

## 技术支持

如配置过程中遇到问题，可以：
- 查看微信官方文档：https://developers.weixin.qq.com/miniprogram/dev/framework/user-privacy/
- 联系小程序原开发者（如购买时有提供技术支持服务）

---

**祝您配置顺利！** 🎉

